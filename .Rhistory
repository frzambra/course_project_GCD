summarise_each(funs(weighted.mean(.,subjectTrain)),-subjectTrain) %>%
melt(dataTrain_S,id=c('activity'))
??melt
class(dataTrain_S)
dataTrain_S <- dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subjectTrain)),-subjectTrain) %>%
melt(dataTrain_S,id=c('activity'))
melt
library(data.table)
melt
dataTrain_S
dataTrain_S <- dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subjectTrain)),-subjectTrain)
dataTrain_S
melt(dataTrain_S,id=c('activity'))
melt.data.table
data.table::melt
data.table:::melt
library(ggplot2)
?melt
melt(dataTrain_S,id=c('activity'))
melt
library(reshape2)
melt
melt(dataTrain_S,id=c('activity'))
dataTrain_Sm <- melt(dataTrain_S,id=c('activity'))
dim(dataTrain_Sm)
xtest <- read.table('Data/test/X_train.txt')
xtest <- read.table('Data/test/X_test.txt')
feat <- read.table("Data/features.txt")
ytest <- read.table('Data/train/y_test.txt')
ytest <- read.table('Data/test/y_test.txt')
subtest <- read.table('Data/test/subject_test.txt')
actlabels <- read.table('Data/activity_labels.txt')
ind <- c(grep("mean\\()",feat[,2]),grep("std\\()",feat[,2]))
labvar <- feat[ind,2]
labvar <- gsub("Body","B",labvar)
labvar <- gsub("Gyro","G",labvar)
labvar <- gsub("Gravity","G",labvar)
labvar <- gsub("Acc","A",labvar)
labvar <- gsub("Jerk","J",labvar)
labvar <- gsub("Mag","M",labvar)
labvar <- gsub("-std\\()","_std",labvar)
labvar <- gsub("-mean\\()","_mean",labvar)
labvar <- gsub("-","_",labvar)
labvar <- gsub("tBody","tB",labvar)
labvar <- paste0(labvar,"_TR")
labvar
ytest[,1]<-as.factor(ytest[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytest[,1])<-actlabels[,2]
dataTest <- data.table(activity=ytest[,1],subjectTest=subtest[,1],xtest[,ind])
setnames(dataTest,names(dataTest)[3:68],labvar)
dataTest_S <- dataTest %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subjectTest)),-subjectTest)
dataTest_Sm <- melt(dataTest_S,id=c('activity'))
dim(dataTrain_Sm)
dim(dataTrain_Sm)
dataTrain_Sm
rm(list=ls())
labvar
#setea el directorio de trabajo
setwd('~/coursera/Getting_and_Cleaning_Data/course_project')
list.files()
library(data.table)
#Train data set
xtrain <- read.table('Data/train/X_train.txt')
feat <- read.table("Data/features.txt")
ytrain <- read.table('Data/train/y_train.txt')
subtrain <- read.table('Data/train/subject_train.txt')
actlabels <- read.table('Data/activity_labels.txt')
#find the position of the mean() and std() asociated variables
ind <- c(grep("mean\\()",feat[,2]),grep("std\\()",feat[,2]))
#shorting the names of the variables
labvar <- feat[ind,2]
labvar <- gsub("Body","B",labvar)
labvar <- gsub("Gyro","G",labvar)
labvar <- gsub("Gravity","G",labvar)
labvar <- gsub("Acc","A",labvar)
labvar <- gsub("Jerk","J",labvar)
labvar <- gsub("Mag","M",labvar)
labvar <- gsub("-std\\()","_std",labvar)
labvar <- gsub("-mean\\()","_mean",labvar)
labvar <- gsub("-","_",labvar)
labvar <- gsub("tBody","tB",labvar)
ytrain[,1]<-as.factor(ytrain[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytrain[,1])<-actlabels[,2]
dataTrain <- data.table(activity=ytrain[,1],subjectTrain=subtrain[,1],xtrain[,ind])
setnames(dataTrain,names(dataTrain)[3:68],labvar)
library(dplyr)
dataTrain_S <- dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subjectTrain)),-subjectTrain)
dataTrain_Sm <- melt(dataTrain_S,id=c('activity'))
dim(dataTrain_Sm)
str(dataTrain_Sm)
labvar
labvar1<-labvar
xtest <- read.table('Data/test/X_test.txt')
feat <- read.table("Data/features.txt")
ytest <- read.table('Data/test/y_test.txt')
subtest <- read.table('Data/test/subject_test.txt')
actlabels <- read.table('Data/activity_labels.txt')
#find the position of the mean() and std() asociated variables
ind <- c(grep("mean\\()",feat[,2]),grep("std\\()",feat[,2]))
#shorting the names of the variables
labvar <- feat[ind,2]
labvar <- gsub("Body","B",labvar)
labvar <- gsub("Gyro","G",labvar)
labvar <- gsub("Gravity","G",labvar)
labvar <- gsub("Acc","A",labvar)
labvar <- gsub("Jerk","J",labvar)
labvar <- gsub("Mag","M",labvar)
labvar <- gsub("-std\\()","_std",labvar)
labvar <- gsub("-mean\\()","_mean",labvar)
labvar <- gsub("-","_",labvar)
labvar <- gsub("tBody","tB",labvar)
match(labvar1,labvar)
labvar1%in%labvar
xtest <- read.table('Data/test/X_test.txt')
feat <- read.table("Data/features.txt")
ytest <- read.table('Data/test/y_test.txt')
subtest <- read.table('Data/test/subject_test.txt')
actlabels <- read.table('Data/activity_labels.txt')
ytest[,1]<-as.factor(ytest[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytest[,1])<-actlabels[,2]
dataTest <- data.table(activity=ytest[,1],subjectTest=subtest[,1],xtest[,ind])
setnames(dataTest,names(dataTest)[3:68],labvar)
library(dplyr)
dataTest_S <- dataTest %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subjectTest)),-subjectTest)
dataTest_Sm <- melt(dataTest_S,id=c('activity'))
dim(dataTrain_Sm)
?merge
head(dataTest_Sm)
head(dataTrain_Sm)
merge(dataTest_Sm,dataTrain_Sm,by=c(variable,activity))
merge(dataTest_Sm,dataTrain_Sm,by=c("variable","activity"))
dataMerged <- merge(dataTest_Sm,dataTrain_Sm,by=c("variable","activity"))
names(dataMerged)
names(dataMerged)[3:4] <- c("Test","Train")
?setnames
setnames(dataMerged,names(dataMerged)[3:4],c("Test","Train"))
head(dataMerged)
?write.table()
write.table(dataMerged,'finalData.txt',row.name=FALSE)
getwd()
rm(list=ls())
# Course Project Getting and Cleaning data
# july 2015
# Francisco Zambrano Bigiarini (frzambra@gmail.com)
#setea el directorio de trabajo
setwd('~/coursera/Getting_and_Cleaning_Data/course_project')
list.files()
library(data.table)
#Train data set
xtrain <- read.table('Data/train/X_train.txt')
feat <- read.table("Data/features.txt")
ytrain <- read.table('Data/train/y_train.txt')
subtrain <- read.table('Data/train/subject_train.txt')
actlabels <- read.table('Data/activity_labels.txt')
#find the position of the mean() and std() asociated variables
ind <- c(grep("mean\\()",feat[,2]),grep("std\\()",feat[,2]))
#shorting the names of the variables
labvar <- feat[ind,2]
labvar <- gsub("Body","B",labvar)
labvar <- gsub("Gyro","G",labvar)
labvar <- gsub("Gravity","G",labvar)
labvar <- gsub("Acc","A",labvar)
labvar <- gsub("Jerk","J",labvar)
labvar <- gsub("Mag","M",labvar)
labvar <- gsub("-std\\()","_std",labvar)
labvar <- gsub("-mean\\()","_mean",labvar)
labvar <- gsub("-","_",labvar)
labvar <- gsub("tBody","tB",labvar)
ytrain[,1]<-as.factor(ytrain[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytrain[,1])<-actlabels[,2]
dataTrain <- data.table(activity=ytrain[,1],subjectTrain=subtrain[,1],xtrain[,ind])
setnames(dataTrain,names(dataTrain)[3:68],labvar)
head(dataTrain)
dataTrain <- data.table(activity=ytrain[,1],subject=subtrain[,1],xtrain[,ind])
setnames(dataTrain,names(dataTrain)[3:68],labvar)
dataTrain_Sm <- melt(dataTrain_S,id=c('activity','subject'))
dataTrain_Sm <- melt(dataTrain,id=c('activity','subject'))
dim(dataTrain_Sm)
dataTrain_m <- melt(dataTrain,id=c('activity','subject'))
dim(dataTrain_m)
head(dataTrain_m)
table(dataTrain_m)
table(dataTrain)
dataTrain
?table
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,subject)),-subjectTrain)
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,subject)),-subject)
dataTrain %>% group_by(subject)
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,activity)))
table(dataTrain)
dataTrain
dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean()))
dataTrain %>% group_by(subject) %>% n()
dataTrain %>% group_by(subject)
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
?group_by
dataTrain %>% group_by(subject) %>% summarize(count=n())
dataTrain %>% group_by(subject) %>% summarize(count=n())
dataTrain %>% group_by(subject,activity) %>% summarize(count=n())
dataTrain %>% group_by(subject,activity)
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
str(dataTrain)
dataTrain %>% group_by(subject,activity) %>% summarize(count = n() )
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean()))
dataTrain %>% group_by(subject,activity)
dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean()))
library(dplyr)
dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean()))
table(as.data.frame(dataTrain))
as.data.frame(dataTrain)
table(as.data.frame(dataTrain)))
table(as.data.frame(dataTrain))
table(dataTrain$activity,dataTrain$subject)
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
warnings()
str(dataTrain)
dataTrain$activity <- as.character(dataTrain$activity)
str(dataTrain)
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(mean()))
dataTrain %>% group_by(subject) %>%
summarise_each(funs(mean))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weigthed.mean))
weighted.mean
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(,.activity)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(,.subject)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,activity)))
str(dataTrain)
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,subject)))
dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(weighted.mean(.,subject)))
str(dataTrain_m)
dataTrain _m %>% group_by(subject,activity) %>%
summarise(funs(weighted.mean(value,variable)))
dataTrain _m %>% group_by(subject,activity) %>%
summarise(weighted.mean(value,variable))
dataTrain_m %>% group_by(subject,activity) %>%
summarise(weighted.mean(value,variable))
dataTrain %>% group_by(subject,activity) %>%
summarise(count=n())
?summarise
dataTrain %>% group_by(subject) %>%
summarise(count=n())
dataTrain %>% group_by(activity) %>%
summarise(count=n())
dataTrain %>% group_by(activity) %>%
summarise(co=n())
?n
summarise(dataTrain, n = n())
str(dataTrain)
dataTrain %>% group_by(activity) %>%
summarize(co=n())
dataTrain %>% group_by(activity) %>%
summarise_each(co=n())
dataTrain %>% group_by(activity) %>%
summarise_each(funs(mean))
dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(mean))
dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean))
dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,activity)))
dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,tBA_mean_X)))
?weighted.mena
?weighted.mean
dataTrain_S <- dataTrain %>% group_by(activity,subject) %>%
dataTrain_S2 <- dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,tBA_mean_Y)))
dataTrain_S2 <- dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,tBA_mean_Y)))
head(dataTrain_S)
dataTrain_S <- dataTrain %>% group_by(activity,subject) %>%
summarise_each(funs(weighted.mean(.,tBA_mean_X)))
head(dataTrain_S)
head(dataTrain_S2)
table(dataTrain$subject,dataTrain$activity)
summarize(table(dataTrain$subject,dataTrain$activity))
colSums(table(dataTrain$subject,dataTrain$activity))
dataTrain %>% group_by(activity) %>%
summarize(n(subject))
dataTrain %>% group_by(activity) %>%
summarize(n())
dataTrain %>% group_by(activity) %>%
summarize(sum())
dataTrain %>% group_by(activity) %>%
summarize(sum(subject))
dataTrain %>% group_by(activity,subject) %>%
summarize(sum(subject))
mtcars %>%
group_by(cyl) %>%
summarise_each(funs(weighted.mean(., gear)),
-gear)
mtcars
head(dataTrain)
dataTrain %>% group_by(subject) %>%
summarize(c=n())
dataTrain %>% group_by(subject) %>%
summarize(c = n())
dataTrain %>% group_by(subject) %>%
summarise(c = n())
?n
carriers <- group_by(flights, carrier)
library(dplyr)
dataTrain %>% group_by(subject) %>%
summarise(c = n())
carriers
mtcars %>%
group_by(cyl) %>%
summarise(c=n())
dataTrain_S <- dataTrain %>% group_by(subject) %>%
summarize_each(funs(mean))
dataTrain_S <- dataTrain %>% group_by(subject) %>%
summarise_each(funs(mean))
dataTrain_S <- dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataTrain_S
dataTrain_Sm <- melt(dataTrain_S,id=c('activity','subject'))
dataTrain_Sm
cbind(dataTrain_S, DataSet=Train)
cbind(dataTrain_S, DataSet="Train")
cbind(dataTrain_Sm, DataSet="Train")
cbind(DataSet="Train",dataTrain_Sm)
#Test data set
xtest <- read.table('Data/test/X_test.txt')
feat <- read.table("Data/features.txt")
ytest <- read.table('Data/test/y_test.txt')
subtest <- read.table('Data/test/subject_test.txt')
actlabels <- read.table('Data/activity_labels.txt')
ytest[,1]<-as.factor(ytest[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytest[,1])<-actlabels[,2]
dataTest <- data.table(activity=ytest[,1],subjectTest=subtest[,1],xtest[,ind])
setnames(dataTest,names(dataTest)[3:68],labvar)
dataTest_S <- dataTest %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
head(dataTest)
dataTest <- data.table(activity=ytest[,1],subject=subtest[,1],xtest[,ind])
setnames(dataTest,names(dataTest)[3:68],labvar)
library(dplyr)
dataTest_S <- dataTest %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataTest_Sm <- melt(dataTest_S,id=c('activity','subject'))
dataTest_Sm <- cbind(DataSet="Test",dataTrain_Sm)
rbind(dataTest_Sm,dataTrain_Sm)
names(dataTest_Sm)
names(dataTrain_Sm)
dataTest_Sm <- cbind(DataSet="Test",dataTrain_Sm)
dataMerged <- rbind(dataTest_Sm,dataTrain_Sm)
dataTest_Sm <- melt(dataTest_S,id=c('activity','subject'))
dataTest_Sm <- cbind(DataSet="Test",dataTest_Sm)
rbind(dataTest_Sm,dataTrain_Sm)
names(dataTest_Sm)
names(dataTrain_Sm)
rm(list=ls())
# Course Project Getting and Cleaning data
# july 2015
# Francisco Zambrano Bigiarini (frzambra@gmail.com)
#setea el directorio de trabajo
setwd('~/coursera/Getting_and_Cleaning_Data/course_project')
list.files()
library(data.table)
#Train data set
xtrain <- read.table('Data/train/X_train.txt')
feat <- read.table("Data/features.txt")
ytrain <- read.table('Data/train/y_train.txt')
subtrain <- read.table('Data/train/subject_train.txt')
actlabels <- read.table('Data/activity_labels.txt')
#find the position of the mean() and std() asociated variables
ind <- c(grep("mean\\()",feat[,2]),grep("std\\()",feat[,2]))
#shorting the names of the variables
labvar <- feat[ind,2]
labvar <- gsub("Body","B",labvar)
labvar <- gsub("Gyro","G",labvar)
labvar <- gsub("Gravity","G",labvar)
labvar <- gsub("Acc","A",labvar)
labvar <- gsub("Jerk","J",labvar)
labvar <- gsub("Mag","M",labvar)
labvar <- gsub("-std\\()","_std",labvar)
labvar <- gsub("-mean\\()","_mean",labvar)
labvar <- gsub("-","_",labvar)
labvar <- gsub("tBody","tB",labvar)
ytrain[,1]<-as.factor(ytrain[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytrain[,1])<-actlabels[,2]
dataTrain <- data.table(activity=ytrain[,1],subject=subtrain[,1],xtrain[,ind])
setnames(dataTrain,names(dataTrain)[3:68],labvar)
library(dplyr)
dataTrain_S <- dataTrain %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataTrain_Sm <- melt(dataTrain_S,id=c('activity','subject'))
dataTrain_Sm <- cbind(DataSet="Train",dataTrain_Sm)
#Test data set
xtest <- read.table('Data/test/X_test.txt')
feat <- read.table("Data/features.txt")
ytest <- read.table('Data/test/y_test.txt')
subtest <- read.table('Data/test/subject_test.txt')
actlabels <- read.table('Data/activity_labels.txt')
ytest[,1]<-as.factor(ytest[,1])
actlabels[,2] <- as.factor(actlabels[,2])
levels(ytest[,1])<-actlabels[,2]
dataTest <- data.table(activity=ytest[,1],subject=subtest[,1],xtest[,ind])
setnames(dataTest,names(dataTest)[3:68],labvar)
library(dplyr)
dataTest_S <- dataTest %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataTest_Sm <- melt(dataTest_S,id=c('activity','subject'))
dataTest_Sm <- cbind(DataSet="Test",dataTest_Sm)
names(dataTest_Sm)
names(dataTrain_Sm)
dataMerged <- rbind(dataTest_Sm,dataTrain_Sm)
dataMerged
table(dataMerged$DataSet,dataMerged$subject)
write.table(dataMerged,'finalData.txt',row.name=FALSE)
dataMerged %>% group_by(DataSet,subject,activity) %>%
summarise_each(funs(mean))
dataMerged %>% group_by(DataSet,subject,activity,variable) %>%
summarise_each(funs(mean))
dim(dataMerged)
dataMerged %>% group_by(subject,activity) %>%
summarise_each(funs(mean))
dataMerged %>% group_by(subject,activity) %>%
summarize(mean(value))
?summarize
dataMerged %>% group_by(subject,activity) %>%
summarise(mean(value))
dataMerged %>% group_by(subject,activity) %>%
summarise(mean)
dataMerged %>% group_by(subject,activity) %>%
summarise(Avg=mean(value))
dataMerged %>% group_by(subject,activity) %>%
summarise(Avg=mean())
dataMerged %>% group_by(subject,activity) %>%
summarise(Avg=mean())
dataMerged %>% group_by(subject,activity) %>%
summarise(Avg=mean())
dataMerged %>% group_by(subject,activity) %>%
summarise(Avg=mean(value))
grouped <- group_by(dataMerged,subject,activity)
summarise(grouped, mean=mean(value), sd=sd(value))
head(dataMerged)
grouped
grouped <- group_by(dataMerged,activity,subject)
summarise(grouped, mean=mean(value), sd=sd(value))
library(reshape2)
melted <- melt(data, id.vars=c("sex", "treatment"))
melted
data <- data.frame(sex = c(rep(1, 1000), rep(2, 1000)),
treatment = rep(c(1, 2), 1000),
response1 = rnorm(2000, 0, 1),
response2 = rnorm(2000, 0, 1))
## reshape2 still does its thing:
library(reshape2)
melted <- melt(data, id.vars=c("sex", "treatment"))
melted
grouped <- group_by(melted, sex, treatment)
summarise(grouped, mean=mean(value), sd=sd(value))
